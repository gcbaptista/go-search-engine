---
description: 
globs: 
alwaysApply: true
---
# Development Rules

> **ðŸ“‹ See `overview.mdc` for critical rules that always apply across all domains**

## Code Quality & Standards

- Always be coherent with what is defined in docs/CLAUDE.md. If any assumption in this file changes, make sure you reflect on it.
- **ðŸš« CRITICAL: NO BACKWARD COMPATIBILITY OR DEPRECATED CODE**
    - Remove old code completely when implementing new features
    - Don't maintain legacy systems or deprecated functions
    - Clean up unused imports, functions, and structures
    - When refactoring, delete the old implementation entirely
    - No "TODO: remove deprecated" comments - remove immediately
- I don't want any comments related to refactors, only leave a comment if they clarify the code
- After finishing any major task (feature implementation, significant refactoring, API changes), MUST run the complete linting suite as defined in docs/CLAUDE.md Post-Major Task Requirements section
- Follow all linting rules and code quality standards defined in docs/CLAUDE.md
- Use the exact linting commands specified in the documentation for consistency
- Ensure all linting issues are resolved before considering a major task complete

## API Changes

- Any change in the API, make sure you also reflect it in the api-spec.yaml

## Search Rules Engine

- The search rules engine uses **persistent FileRuleStore** in `search_data/rules.json`
- Rules are shared between API handlers and search handlers via dependency injection
- Search responses include descriptive rule information in the `rules` field (not headers)
- Follow the analytics pattern: single shared store instance created in `SetupRoutes`
- See docs/SEARCH_RULES.md for complete documentation

## Testing

- Any tests you perform against the application, make sure you leave it as you found it (indexes, settings, documents, rules, etc...)
